<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Toddler Transducer</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet">
    <link href="{{ url_for('static', filename='player.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='searchable_list.css') }}" rel="stylesheet">
    <script src="{{ url_for('static', filename='searchable_list.js') }}">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div>
        <h1>Welcome to the Toddler Transducer</h1>
        <div class="row">
            <div class="col-6" style="text-align: center;">
                <div class="row">
                    <div class="player">
                        <div class="player-track-meta">
                            <p>{{track_name}}</p>
                        </div>
                        <div class="player-controls">
                            <form action="/play_track" method="post">
                                <input type="text" id="mySearch" onkeyup="searchList()" placeholder="Search.." title="Type in a category" autocomplete="off" name="AudioTrackName">
                                <button type="submit" class="GFG" name={{play_status}}>
                                    <div class="player-icon-play">
                                        <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><title>play</title>
                                            {{play_status_icon|safe}}
                                            <rect class="icon-container" width="24" height="24"/></svg>
                                    </div>
                                </button>
                                <ul id="myMenu">
                                    {% for track in playable_tracks %}
                                        <li id= "{{track}}" onclick="getListElement(id)">{{track}}</li>
                                    {% endfor %}
                                </ul>
                            </form>
                            <form action="/loop_track" method="post">
                                <button type="submit" class="GFG" name="">
                                    <div class="player-icon-play">
                                        <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><title>repeat</title>
                                            <rect class="{{loop_icon_class}}" width="24" height="24"/>
                                            <polygon class="icon-play" points="10 7 16 2 16 12" fill="black"/>
                                            <path d="M 8 7 C -7 24, 34 24, 16 7" stroke="black" fill="transparent" />
                                        </svg>
                                    </div>
                                </button>
                            </form>
                            <div class="player-timeline">
                              <span class="player-time player-time-current">{{play_current_time}}</span>
                              <div class="player-progress">
                                  <div class="player-progress-filled"></div>
                              </div>
                              <span class="player-time player-time-duration">{{play_track_length}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6" style="text-align: center;">
                <h2>Upload New Track</h2>
                <form action="/upload_track" method="post">
                    <input type="submit" name="UpdatePuckID" value="Update Puck ID"><br>
                </form>
                <h4>{{current_puck_id}}</h4>
                <form action="/upload_track" method="post" enctype = "multipart/form-data">
                    <label for="TrackName" class="form-label">Track Name</label>
                    <input type="text" class="form-control" id="TrackName" placeholder="IllMakeAManOutOfYou" name="TrackName"><br>

                    <label for="TrackFile">File to upload:</label>
                    <input type="file" id="TrackFile" name="TrackFile">

                    <input type="submit" name="UploadFile" value="Upload">
                </form>
                <h2>Download Backup</h2>
                <form action="/backup_audio" method="get">
                    <input type="submit" name="DownloadBackup" value="Download Backup"><br>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
